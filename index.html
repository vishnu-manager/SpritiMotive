<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Books for Students | Motivation ‚Ä¢ Study ‚Ä¢ EAMCET</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="Best motivational and study books for students including Inter & EAMCET preparation.">
<meta name="robots" content="index, follow">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff9900">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Inter,sans-serif;background:#f4f6f8;color:#111}

header{
  background:#1f2937;color:#fff;
  padding:16px;text-align:center;
  position:sticky;top:0;z-index:10
}
header h1{margin:0;font-size:22px}
header p{margin:6px 0;font-size:14px;opacity:.9}

.controls{
  display:flex;gap:8px;flex-wrap:wrap;
  justify-content:center;margin-top:10px
}
.controls button,select{
  padding:7px 14px;border:none;
  border-radius:20px;
  background:#ff9900;
  font-weight:600;cursor:pointer
}
.controls button.active{background:#f59e0b}

.container{
  max-width:1100px;
  margin:20px auto 40px;
  padding:0 14px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px
}

.section-title{
  grid-column:1/-1;
  font-size:18px;
  margin:16px 0 6px;
  color:#1f2937;
  font-weight:700
}

.book{
  background:#fff;border-radius:10px;
  padding:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  display:flex;flex-direction:column;
  position:relative
}

.badge{
  position:absolute;top:8px;left:8px;
  background:#22c55e;color:#fff;
  font-size:11px;padding:3px 8px;
  border-radius:12px
}

.wish{
  position:absolute;top:8px;right:8px;
  font-size:18px;cursor:pointer;color:#ef4444
}

.book img{
  width:100%;height:180px;
  object-fit:contain
}

.book h3{font-size:14px;margin:6px 0}
.book p{font-size:12px;color:#555;flex-grow:1}
.stars{color:#f59e0b;font-size:13px}

.btn{
  background:#ff9900;color:#111;
  text-decoration:none;text-align:center;
  padding:7px;border-radius:6px;
  font-weight:700;font-size:13px
}

footer{
  background:#1f2937;color:#fff;
  text-align:center;padding:14px;
  font-size:13px
}

.youtube-box{
  text-align:center;
  padding:16px;
  background:#0f172a;
}

.youtube-box a{
  display:inline-block;
  background:#ff0000;
  color:#fff;
  text-decoration:none;
  padding:12px 26px;
  border-radius:30px;
  font-weight:700;
  font-size:14px;
}
</style>
</head>

<body>

<header>
<h1>üìö Books for Students</h1>
<p>Motivation ‚Ä¢ Study ‚Ä¢ Inter ‚Ä¢ EAMCET</p>

<div class="controls" id="categoryButtons">
  <button class="active" onclick="filterCategory('All',this)">All</button>
</div>

<div class="controls">
  <select onchange="sortBooks(this.value)">
    <option value="default">Sort</option>
    <option value="rating">‚≠ê Top Rated</option>
    <option value="badge">üî• Bestseller</option>
  </select>
</div>
</header>

<div class="container" id="books"></div>

<footer>
  <div class="youtube-box">
    <a href="https://www.youtube.com/@spiritMotive-s63" target="_blank">
      ‚ñ∂ Subscribe on YouTube
    </a>
  </div>

  <p>As an Amazon Associate, I earn from qualifying purchases.</p>
  <p>Views: <span id="views"></span> | Clicks: <span id="clicks"></span></p>
</footer>

<script>
/* ================= CONFIG ================= */
const SHEET_ID="1DYs0Y_1YqvOK2LM-MNiD_xVwPOX1C6Mel3xY7ALxXXc";
const URL=`https://opensheet.elk.sh/${SHEET_ID}/Sheet1`;

let ALL_BOOKS=[];
let wishlist=JSON.parse(localStorage.getItem("wishlist")||"[]");

/* ================= ANALYTICS ================= */
localStorage.setItem("views",(Number(localStorage.getItem("views"))||0)+1);
document.getElementById("views").innerText=localStorage.getItem("views");
document.getElementById("clicks").innerText=localStorage.getItem("clicks")||0;

/* ================= FETCH DATA ================= */
fetch(URL)
.then(res=>res.json())
.then(data=>{
  ALL_BOOKS=data;
  createCategoryButtons();
  renderBooks("All");
});

/* ================= CATEGORY BUTTONS ================= */
function createCategoryButtons(){
  const wrap=document.getElementById("categoryButtons");
  wrap.innerHTML=`<button class="active" onclick="filterCategory('All',this)">All</button>`;
  [...new Set(ALL_BOOKS.map(b=>b.Category))].forEach(c=>{
    const btn=document.createElement("button");
    btn.innerText=c;
    btn.onclick=()=>filterCategory(c,btn);
    wrap.appendChild(btn);
  });
}

/* ================= RENDER ================= */
function renderBooks(cat){
  const box=document.getElementById("books");
  box.innerHTML="";
  const groups={};

  ALL_BOOKS
    .filter(b=>cat==="All"||b.Category===cat)
    .forEach(b=>{
      groups[b.Category]=groups[b.Category]||[];
      groups[b.Category].push(b);
    });

  for(let c in groups){
    box.innerHTML+=`<div class="section-title">${c}</div>`;
    groups[c].forEach(renderOne);
  }
}

function renderOne(b){
  const box=document.getElementById("books");
  const wished=wishlist.includes(b.Title);

  const div=document.createElement("div");
  div.className="book";
  div.innerHTML=`
    ${b.Badge?`<span class="badge">${b.Badge}</span>`:""}
    <span class="wish" onclick="toggleWish('${b.Title}',this)">${wished?"‚ô•":"‚ô°"}</span>
    <img src="${b.Image}" loading="lazy">
    <h3>${b.Title}</h3>
    <div class="stars">${"‚òÖ".repeat(Math.round(b.Rating||4))}</div>
    <p>${b.Description||""}</p>
    <a class="btn" href="${b.Link}" target="_blank" onclick="trackClick()">Buy on Amazon</a>
  `;
  box.appendChild(div);
}

/* ================= FILTER & SORT ================= */
function filterCategory(cat,btn){
  document.querySelectorAll(".controls button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderBooks(cat);
}

function sortBooks(type){
  let list=[...ALL_BOOKS];
  if(type==="rating") list.sort((a,b)=>(b.Rating||0)-(a.Rating||0));
  if(type==="badge") list.sort((a,b)=>(b.Badge?1:0)-(a.Badge?1:0));

  const box=document.getElementById("books");
  box.innerHTML=`<div class="section-title">Sorted Results</div>`;
  list.forEach(renderOne);
}

/* ================= WISHLIST ================= */
function toggleWish(title,el){
  if(wishlist.includes(title)){
    wishlist=wishlist.filter(t=>t!==title);
    el.innerText="‚ô°";
  }else{
    wishlist.push(title);
    el.innerText="‚ô•";
  }
  localStorage.setItem("wishlist",JSON.stringify(wishlist));
}

/* ================= CLICK TRACK ================= */
function trackClick(){
  localStorage.setItem("clicks",(Number(localStorage.getItem("clicks"))||0)+1);
  document.getElementById("clicks").innerText=localStorage.getItem("clicks");
}

/* ================= SERVICE WORKER ================= */
if("serviceWorker" in navigator){
  window.addEventListener("load",()=>{
    navigator.serviceWorker.register("service-worker.js");
  });
}
</script>

</body>
</html>
