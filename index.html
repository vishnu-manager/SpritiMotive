<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Books for Students | Motivation & Study</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Inter,sans-serif;background:#f4f6f8;color:#111}

header{
  background:#1f2937;color:#fff;
  padding:16px;text-align:center;
  position:sticky;top:0;z-index:10
}
header h1{margin:0;font-size:22px}
header p{margin:6px 0;font-size:14px;opacity:.9}

.controls{
  display:flex;gap:8px;flex-wrap:wrap;
  justify-content:center;margin-top:10px
}
.controls button{
  padding:7px 14px;border:none;
  border-radius:20px;
  background:#ff9900;
  font-weight:600;cursor:pointer
}
.controls button.active{background:#f59e0b}

.container{
  max-width:1100px;
  margin:20px auto 40px;
  padding:0 14px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px
}

.book{
  background:#fff;border-radius:10px;
  padding:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  display:flex;flex-direction:column;
  position:relative
}

.badge{
  position:absolute;top:8px;left:8px;
  background:#22c55e;color:#fff;
  font-size:11px;padding:3px 8px;
  border-radius:12px
}

.book img{
  width:100%;height:180px;
  object-fit:contain
}
.book h3{font-size:14px;margin:6px 0}
.book p{font-size:12px;color:#555;flex-grow:1}
.stars{color:#f59e0b;font-size:13px}

.btn{
  background:#ff9900;color:#111;
  text-decoration:none;text-align:center;
  padding:7px;border-radius:6px;
  font-weight:700;font-size:13px
}

footer{
  background:#1f2937;color:#fff;
  text-align:center;padding:14px;
  font-size:13px
}
</style>
</head>

<body>

<header>
<h1>ðŸ“š Books for Students</h1>
<p>Motivation â€¢ Inter â€¢ EAMCET â€¢ Study</p>

<div class="controls" id="categoryButtons">
  <button class="active" onclick="filterCategory('All',this)">All</button>
</div>
</header>

<div class="container" id="books"></div>

<footer>
<p>As an Amazon Associate, I earn from qualifying purchases.</p>
</footer>

<script>
const SHEET_ID = "1DYs0Y_1YqvOK2LM-MNiD_xVwPOX1C6Mel3xY7ALxXXc";
const URL = `https://opensheet.elk.sh/${SHEET_ID}/Sheet1`;

let ALL_BOOKS = [];

fetch(URL)
.then(res => res.json())
.then(data => {
  ALL_BOOKS = data;
  createCategoryButtons();
  renderBooks("All");
});

function createCategoryButtons(){
  const cats = [...new Set(ALL_BOOKS.map(b => b.Category))];
  const wrap = document.getElementById("categoryButtons");

  cats.forEach(c => {
    const btn = document.createElement("button");
    btn.innerText = c;
    btn.onclick = function(){ filterCategory(c,btn); };
    wrap.appendChild(btn);
  });
}

function renderBooks(category){
  const box = document.getElementById("books");
  box.innerHTML = "";

  ALL_BOOKS
  .filter(b => category==="All" || b.Category===category)
  .forEach(b => {
    const div = document.createElement("div");
    div.className = "book";
    div.innerHTML = `
      ${b.Badge ? `<span class="badge">${b.Badge}</span>` : ""}
      <img src="${b.Image}">
      <h3>${b.Title}</h3>
      <div class="stars">${"â˜…".repeat(Math.round(b.Rating || 4))}</div>
      <p>${b.Description || ""}</p>
      <a class="btn" href="${amazonLink(b.Link)}">Buy on Amazon</a>
    `;
    box.appendChild(div);
  });
}

function filterCategory(cat,btn){
  document.querySelectorAll(".controls button")
    .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderBooks(cat);
}

function amazonLink(url){
  if(/Android|iPhone/i.test(navigator.userAgent)){
    return "intent://" + url.replace("https://","") +
      "#Intent;package=com.amazon.mShop.android.shopping;end";
  }
  return url;
}
</script>

</body>
</html>
